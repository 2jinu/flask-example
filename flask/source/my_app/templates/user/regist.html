{% extends "base.html" %}

{% block content %}

<div class="container-fluid">
    <div class="row vh-100">
        <div class="d-none d-md-flex col-md-4 col-lg-6 align-items-end" style="background-color: #2c3e50;">
            <div class="d-none d-lg-flex flex-column mb-3">
                <p class="text-light fw-bold display-1">FLASK</p>
                <p class="text-light fw-bold display-1">EXAMPLE</p>
            </div>
        </div>
        <div class="col-md-8 col-lg-6">
            <div class="d-flex align-items-center py-5 h-100">
                <div class="container">
                    <div class="row">
                        <div class="col-md-9 col-lg-8 mx-auto">
                            <h3 class="login-heading mb-4">환영합니다!</h3>
                            <form action="{{ url_for('index.regist')}}" method="post">
                                {{ form.hidden_tag() }}
                                <div class="form-label-group position-relative mb-3">
                                    {{ form.username(class="form-control") }}
                                    {{ form.username.label }}
                                </div>
                
                                <div class="form-label-group position-relative mb-3">
                                    {{ form.password(class="form-control") }}
                                    {{ form.password.label }}
                                </div>

                                <div class="form-label-group position-relative">
                                    {{ form.password_confirm(class="form-control") }}
                                    {{ form.password_confirm.label }}
                                </div>

                                <p style="height: 24px;"><em><small id="password-message"></small></em></p>

                                <div class="d-flex justify-content-between align-items-center">
                                    {{ form.submit(class="btn btn-lg btn-primary text-uppercase font-weight-bold") }}
                                    <a href="{{ url_for('index.login') }}">로그인</a>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const submitBtn = $("#{{ form.submit.id }}");
    const passwordMessage = $('#password-message');
    $('#{{ form.password.id }}, #{{ form.password_confirm.id }}').on('keyup', function () {
        if ($("#{{ form.password.id }}").val() != $("#{{ form.password_confirm.id }}").val()) {
            passwordMessage.html('비밀번호가 일치하지 않습니다.').css('color', 'red');
            submitBtn.prop('disabled', true);
            submitBtn.removeClass("btn-primary");
            submitBtn.addClass("btn-danger");
        } else {
            passwordMessage.html('').css('color', 'green');
            submitBtn.prop('disabled', false);
            submitBtn.removeClass("btn-danger");
            submitBtn.addClass("btn-primary");
        }
    });
</script>

{% endblock %}