{% extends "base.html" %}

{% block content %}

<div class="container-fluid">
    {% include "nav.html" %}

    <div class="container py-3">
        <a href="{{ url_for('board.write') }}" class="btn btn-primary mb-3">글쓰기</a>
        
        <table class="table table-hover">
            <thead>
                <tr>
                    <th class="text-center align-middle col-1" scope="col">번호</th>
                    <th class="text-center align-middle col-auto" scope="col">제목</th>
                    <th class="text-center align-middle col-1" scope="col">글쓴이</th>
                    <th class="text-center align-middle col-2" scope="col">등록일시</th>
                </tr>
            </thead>
            <tbody>
                {% if posts.items|length >= 1 %}
                {% for post in posts.items %}
                <tr>
                    <td class="text-center align-middle" scope="row">
                        {{ post.id }}
                    </td>
                    <td class="text-start align-middle text-truncate" style="max-width: 150px;">
                        <a href="{{ url_for('board.view', post_id=post.id) }}">{{ post.title }}</a>
                    </td>
                    <td class="text-center align-middle">
                        {{ post.user.username }}
                    </td>
                    <td class="text-center align-middle">
                        {{ post.created }}
                    </td>
                </tr>
                {% endfor %}
                {% else %}
                <tr>
                    <td class="text-center" scope="row" colspan="4">작성된 글이 존재하지 않습니다.</td>
                </tr>
                {% endif %}
            </tbody>
        </table>

        <nav aria-label="Page navigation example" class="d-flex justify-content-center">
            <ul class="pagination">
                {% if posts.page != 1 %}
                <li class="page-item">
                    <a class="page-link" href="{{ url_for('board.main', p=1) }}">&laquo;</a>
                </li>
                {% else %}
                <li class="page-item disabled">
                    <a class="page-link">&laquo;</a>
                </li>
                {% endif %}

                {% for page_num in range(start_page, end_page + 1) %}
                <li class="page-item {% if posts.page == page_num %}active{% endif %}">
                    <a class="page-link" href="{{ url_for('board.main', p=page_num) }}">{{ page_num }}</a>
                </li>
                {% endfor %}
                
                {% if posts.page != posts.pages and end_page != 1 %}
                <li class="page-item">
                    <a class="page-link" href="{{ url_for('board.main', p=posts.pages) }}">&raquo;</a>
                </li>
                {% else %}
                <li class="page-item disabled">
                    <a class="page-link">&raquo;</a>
                </li>
                {% endif %}
            </ul>
        </nav>
    </div>
</div>

{% endblock %}